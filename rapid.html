<!DOCTYPE html>
<html>
<head>
    <title>Preluare ID-uri Dinamic</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get("id");

            if (!id) {
                document.getElementById("output").innerText = "Nu a fost specificat niciun ID.";
                return;
            }

            fetch("config.json")
                .then(response => response.json())
                .then(data => {
                    const url = data[id];
                    if (url) {
                        const videoElement = document.getElementById("videoPlayer");

                        if (Hls.isSupported()) {
                            const hls = new Hls();
                            hls.loadSource(url);
                            hls.attachMedia(videoElement);
                        } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                            videoElement.src = url;
                        }
                    } else {
                        document.getElementById("output").innerText = "ID-ul nu a fost găsit în configurare.";
                    }
                })
                .catch(error => {
                    console.error("Eroare la preluarea datelor: ", error);
                    document.getElementById("output").innerText = "Eroare la încărcarea datelor.";
                });
        });
    </script>
</head>
<body>
    <h1>Preluare ID-uri Dinamic</h1>
    <div id="output">Se încarcă...</div>

    <video id="videoPlayer" controls width="600" height="340" style="background-color: #000;"></video>

</body>
</html>
